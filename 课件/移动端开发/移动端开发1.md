# 移动端布局

## 移动web基础知识

### pixel像素

首先说一些关于像素的基础知识：

1.物理像素，比如iphone6对外声称它的分辨率是750*1334就是物理像素

2.px，指的是逻辑像素，浏览器所使用的抽象单位，会根据使用设备的不同而变大变小

3.dp,pt:设备无关像素，不会变大变小，物理世界是多大就多大

4.dpi:设备像素缩放比

计算公式：1px = (dpi)²*dp

比如iphone5的dpi为2，也就1px就会有4个物理像素去渲染.



### viewport

因为早期手机只能显示网页某一部分，所以在智能手机上引入了一个viewport的概念:可以对网页进行缩放，从而显示网页的全貌.比如ios设备上的`viewport`就是980.安卓就根据手机不同`viewport`也会有一些不同.

但我们一般不会使用980px布局的viewport，因为页面缩小版显示，交互不友好，比如文字得在40px左右才有pc上12px同等大小.



### meta-viewport

默认980px布局viewport用户体验不好，怎么改变它，可以通过`meta`标签：

```html
<meta name="viewport" content="name=value,name=value">
```

* width:设置布局viewport的值，比如`width=device-width`让当前的viewport宽/高度等于设备的宽/高度,也可以可以设置一个固定的值，尽可能不这样使用,height是设置高度使用的，我们很少使用
* `initial-scale=1`:设置初始化的缩放比例（0.25 — 10.0，我们设置为1就是没有缩放）
* `maximum-scale=1.0`：设置最大缩放比例（0.25 — 10.0）
* `minimum-scale=1.0`:设置最小缩放比例（0.25 — 10.0）
* `user-scalable=no`:是否允许用户缩放,默认yes可以缩放,如果设置为no，那么minimax-scale和maximum-scale将被忽略，因为不允许缩放

最常用的met-viewport:

```html
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
```



## flexbox弹性盒布局

因为在移动端屏幕的宽度不固定，所以我们一般会采用流式布局(百分比布局)+定位布局+float.

比如要实现一个导航按钮的布局，首先我们有5个按钮：

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Document</title>
	<style type="text/css">
	/*初始化代码*/
	*{
		margin: 0;
		padding: 0;
	}
	li{
		list-style: none;
	}
	.tab{
		height: 50px;
		position: fixed;
		width: 100%;
		left: 0;
		bottom: 0;
		background-color: #ccc;
	}
	.tab li{
		float: left;
		width: 20%;
		text-align: center;
		line-height: 50px;
	}
	</style>
</head>
<body>
	<ul class="tab">
		<li><span>推荐</span></li>
		<li><span>分类</span></li>
		<li><span>发现</span></li>
		<li><span>购物车</span></li>
		<li><span>我的</span></li>
	</ul>
</body>
</html>
```

如果我们要对按钮的数量进行更改，就得重新计算每个按钮所占的百分比.这样就很麻烦，而如果使用如下代码：

```html
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Document</title>
	<style type="text/css">
	/*初始化代码*/
	*{
		margin: 0;
		padding: 0;
	}
	li{
		list-style: none;
	}
	.tab{
		height: 50px;
		position: fixed;
		width: 100%;
		left: 0;
		bottom: 0;
		background-color: #ccc;
		display: flex;
	}
	.tab li{
		/*float: left;
		width: 20%;*/
		flex:1;
		text-align: center;
		line-height: 50px;
	}
	</style>
</head>
<body>
	<ul class="tab">
		<li><span>推荐</span></li>
		<li><span>分类</span></li>
		<li><span>发现</span></li>
		<!-- <li><span>购物车</span></li> -->
		<!-- <li><span>我的</span></li> -->
	</ul>
</body>
</html>
```

可以发现当按钮数量发生改变的时候，每个按钮所占的宽度也进行了自动的改变.这种技术就是`flexbox`。

Flex是Flexible Box的缩写，意为"弹性布局"，用来为盒状模型提供最大的灵活性.

刚才代码中的`display: flex;`就是标示使用弹性布局。

而`flex:1;`标示的是所占容器的比例，比如如果是5个按钮那么所占比例就是1/5,如果是3个那就是1/3.

flex的值也可以是其他的数值.

flex也可以跟普通的width属性混写，比如：

```css
.tab li{
  /*float: left;
  width: 20%;*/
  text-align: center;
  line-height: 50px;
}
.tab li:nth-child(1){
  /*flex:2;*/
  width: 100px;
}
.tab li:nth-child(2),.tab li:nth-child(3){
  flex:1;
}
```

左边固定右边自适应经常用于像图文混排的列表：

https://pro.m.jd.com/mall/active/3DsZBKPm5iXCaw2FyLqsb9rhZLSm/index.html

### 不定宽高的垂直居中

常规写法：

```css
.inner{
		/*position: absolute;
		left: 50%;
		top: 50%;
		-webkit-transform: translate(-50%,-50%);
		-ms-transform: translate(-50%,-50%);
		-o-transform: translate(-50%,-50%);
		transform: translate(-50%,-50%);*/
	}
```

flexbox写法：

```css
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Document</title>
	<style type="text/css">
	/*初始化代码*/
	*{
		margin: 0;
		padding: 0;
	}
	li{
		list-style: none;
	}
	.wrap{
		width: 400px;
		height: 400px;
		border: 1px solid red;
		position: relative;
		display: flex;
		justify-content: center;
		-ms-align-items: center;
		align-items: center;
	}
	.inner{
		/*position: absolute;
		left: 50%;
		top: 50%;
		-webkit-transform: translate(-50%,-50%);
		-ms-transform: translate(-50%,-50%);
		-o-transform: translate(-50%,-50%);
		transform: translate(-50%,-50%);*/
	}
	</style>
</head>
<body>
	<div class="wrap">
		<div class="inner">需要居中的内容</div>
	</div>
</body>
</html>
```

### 父容器相关的flex属性

#### 基本概念

采用Flex布局的元素，称为Flex容器（flex container），简称"容器"。它的所有子元素自动成为容器成员，称为Flex项目（flex item），简称"项目"。

<img src="http://www.ruanyifeng.com/blogimg/asset/2015/bg2015071004.png">

容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。主轴的开始位置（与边框的交叉点）叫做`main start`，结束位置叫做`main end`；交叉轴的开始位置叫做`cross start`，结束位置叫做`cross end`。

项目默认沿主轴排列。单个项目占据的主轴空间叫做`main size`，占据的交叉轴空间叫做`cross size`。

#### `flex-direction`:

```css
flex-direction: row | row-reverse | column | column-reverse;
    		   主轴方向：左到右（默认） | 右到左 | 上到下 | 下到上
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			/*flex-direction: row | row-reverse | column | column-reverse;
    				主轴方向：左到右（默认） | 右到左 | 上到下 | 下到上*/
    				
    			ul:nth-of-type(1){
    				flex-direction: row;
    			}
    			
    			ul:nth-of-type(2){
    				flex-direction: row-reverse;
    			}
    			
    			ul:nth-of-type(3){
    				flex-direction: column;
    			}
    			
    			ul:nth-of-type(4){
    				flex-direction: column-reverse;
    			}

		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>		
	</body>
</html>
```

#### `flex-wrap`

默认情况下，项目都排在一条线（又称"轴线"）上。`flex-wrap`属性定义，如果一条轴线排不下，如何换行。

```css
flex-wrap: nowrap | wrap | wrap-reverse;
    			换行：不换行（默认） | 换行 | 换行并第一行在下方
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			/*flex-wrap: nowrap | wrap | wrap-reverse;*/
    			/*换行：不换行（默认） | 换行 | 换行并第一行在下方*/
    			
    			ul:nth-of-type(1){
    				flex-wrap: nowrap;
    			}
    			
    			ul:nth-of-type(2){
    				flex-wrap: wrap;
    			}
    			
    			ul:nth-of-type(3){
    				flex-wrap: wrap-reverse;
    			}
    			
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
		</ul>
	</body>
</html>
```

#### `justify-content`

`justify-content`属性定义了项目在主轴上的对齐方式。

```css
justify-content: flex-start | flex-end | center | space-between | space-around;
   			 主轴对齐方式：左对齐（默认） | 右对齐 | 居中对齐 | 两端对齐 | 平均分布
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			/*justify-content: flex-start | flex-end | center | space-between | space-around;*/
   			 /*主轴对齐方式：左对齐（默认） | 右对齐 | 居中对齐 | 两端对齐 | 平均分布*/
			
			ul:nth-of-type(1){
				justify-content: flex-start;
			}
			
			ul:nth-of-type(2){
				justify-content: flex-end;
			}
			
			ul:nth-of-type(3){
				justify-content: center;
			}
			
			ul:nth-of-type(4){
				justify-content: space-between;
			}
			
			ul:nth-of-type(5){
				justify-content: space-around;
			}
			

		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
	</body>
</html>
```

#### `align-items`

`align-items`属性定义项目在交叉轴上如何对齐。

```css
align-items: flex-start | flex-end | center | baseline | stretch;
    交叉轴对齐方式：顶部对齐 | 底部对齐 | 居中对齐 | 文本基线对齐 | 
     * 如果子元素未设置高度或设为auto，将占满整个容器的高度。（默认） 
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			/*align-items: flex-start | flex-end | center | baseline | stretch;*/
    /*交叉轴对齐方式：顶部对齐 | 底部对齐 | 居中对齐 | 文本基线对齐(项目的第一行文字的基线对齐) | 
     * 如果子元素未设置高度或设为auto，将占满整个容器的高度。（默认） */
    			
    			ul:nth-of-type(1){
    				align-items: flex-start;
    			}
    			
    			ul:nth-of-type(2){
    				align-items: flex-end;
    			}
    			
    			ul:nth-of-type(3){
    				justify-content: center;
    				align-items: center;
    			}
    			
    			ul:nth-of-type(4){
    				align-items: baseline;
    			}
    			
    			ul li{
    				height: auto;
    			}
    			
    			ul:nth-of-type(5){
    				align-items: stretch;
    			}
    			
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li style="line-height: 80px;">3</li>
			<li>4</li>
			<li>5</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
	</body>
</html>
```

#### `align-content`

`align-content`属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。

```css
align-content: flex-start | flex-end | center | 
			 * space-between | space-around | stretch;
    多主轴对齐：顶部对齐 | 底部对齐 | 居中对齐 | 上下对齐并铺满 | 
     * 均匀分布 | 轴线占满整个交叉轴。（默认）
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			/*align-content: flex-start | flex-end | center | 
			 * space-between | space-around | stretch;*/
    /*多主轴对齐：顶部对齐 | 底部对齐 | 居中对齐 | 上下对齐并铺满 | 
     * 均匀分布 | 轴线占满整个交叉轴。（默认）*/
    
    			ul:nth-of-type(1){
    				flex-wrap: wrap;
    				align-content: flex-start;	
    			}
    			
    			ul:nth-of-type(2){
    				flex-wrap: wrap;
				align-content: flex-end;
    			}
    			
    			ul:nth-of-type(3){
    				flex-wrap: wrap;
    				align-content: center;
    				justify-content: center;
    			}
    			
    			ul:nth-of-type(4){
    				flex-wrap: wrap;
    				align-content: space-between;
    				justify-content: center;
    			}
    			
    			ul:nth-of-type(5){
    				flex-wrap: wrap;
    				align-content: space-around;
    				justify-content: center;
    			}
    			
    			ul li{
    				height: auto;
    			}
    			
    			ul:nth-of-type(6){
    				flex-wrap: wrap;
    				align-content: stretch;
    				justify-content: center;
    			}
    			
    			
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>		
	</body>
</html>
```

### 子元素相关

#### `order属性`

`order`属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。

```css
order: <integer>;
   			 排序：数值越小，越排前，默认为0
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			 /*order: <integer>;*/
   			 /*排序：数值越小，越排前，默认为0*/
   			
   			ul li:nth-of-type(3){
   				order: -1;
   			}
   			
   			ul li:nth-of-type(2){
   				order: 1;
   			}
   			
   			ul li:nth-of-type(1){
   				order: 2;
   			}
   			
   			ul li:nth-of-type(5){
   				order: 4;
   			}
   			
   			ul li:nth-of-type(4){
   				order: 5;
   			}
   			
   			
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>		
	</body>
</html>

```

#### `flex-grow属性`

`flex-grow`属性定义项目的放大比例，默认为`0`，即如果存在剩余空间，也不放大。

如果所有项目的`flex-grow`属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的`flex-grow`属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。

```css
flex-grow: <number>; default 0
    			放大：默认0（即如果有剩余空间也不放大，
    		 	值为1则放大）
```

示例：

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		
		<style type="text/css">
			/*flex-grow: <number>; default 0
    			放大：默认0（即如果有剩余空间也不放大，
    		 	值为1则放大）*/
    		 	/*ul li{
                    flex-grow: 1;
                }*/
    		 	ul li:nth-of-type(1){
    		 		flex-grow: 1;
    		 	}
    		 	
    		 	ul li:nth-of-type(2){
    		 		flex-grow: 1;
    		 	}
    		 	
    		 	ul li:nth-of-type(3){
    		 		flex-grow: 2;
    		 	}
    		 
    		 	ul li:nth-of-type(4){
    		 		flex-grow: 3;
    		 	}
    		 	
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li>2</li>
			<li>3</li>
			<li>4</li>
			<li>5</li>
		</ul>
	</body>
</html>

```

#### `flex-shrink属性`

`flex-shrink`属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。

如果所有项目的`flex-shrink`属性都为1，当空间不足时，都将等比例缩小。如果一个项目的`flex-shrink`属性为0，其他项目都为1，则空间不足时，前者不缩小。

负值对该属性无效。

示例:

```html
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../style.css"/>
		<style type="text/css">
			 /* flex-shrink: <number>;  default 1 
			    缩小：如果所有项目的flex-shrink属性都为1，当空间不足时，
			    都将等比例缩小。如果一个项目的flex-shrink属性为0，
			    其他项目都为1，则空间不足时，前者不缩小。
			负值对该属性无效。）
			332  84-340*2/9
			*/
			
			ul li:nth-of-type(1){
				flex-shrink: 0;
			}
			
			ul li:nth-of-type(5){
				/* 0不变 */
				flex-shrink: 0;
			}
			/* 会缩小，默认是1等比例缩小 */
			ul li:nth-of-type(2){
				
				flex-shrink: 2;
			}
			
			/*
			ul li:nth-of-type(3){
				flex-shrink: 3;
			}
			
			
			ul li:nth-of-type(4){
				flex-shrink: 4;
			}*/
			
			
			
		</style>
	</head>
	<body>
		<ul>
			<li>1</li>
			<li></li>
			<li></li>
			<li></li>
			<li>5</li>
			<li>6</li>
			<li>7</li>
			<li>8</li>
			<li>9</li>
			<li>10</li>
		</ul>
	</body>
</html>
```

计算公式：实际值 = 计划值 - 总差值 * flex-shrink/(flex-shrink和) 