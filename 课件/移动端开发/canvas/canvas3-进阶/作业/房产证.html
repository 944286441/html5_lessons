<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title>Document</title>
	<style type="text/css">
	#myCanvas{
		box-shadow: 0px 0px 5px black;
	}
	</style>
</head>
<body>
	<canvas id="myCanvas" width="350" height="412"></canvas>
	请输入您的姓名：<input type="text" id="name">
	<button id="btn1">生成图片</button>
</body>
<script type="text/javascript">
	var btn1 = document.querySelector("#btn1");
	var username = document.querySelector("#name");
	var canvas = document.querySelector("#myCanvas");
	var ctx = canvas.getContext("2d");

	var deg = Math.PI/180;

	btn1.onclick = function (){

		if (username.value==""){
			alert("请输入姓名");
			return;
		}
		var val = username.value;
		var imgObj = new Image();
		imgObj.src = "1.jpg";
		imgObj.onload = function (){

			ctx.drawImage(this, 0,0);
			ctx.rotate(deg*2);
			ctx.font = "12px 微软雅黑";
			ctx.fillStyle = "#707068";
			ctx.fillText(val,145,115);

			var dataUrl = canvas.toDataURL();
			window.location.href = dataUrl;
		}
	}

</script>
</html>